- title_and_header = 'Which Clean Air Zone do you need to set up a Direct Debit with?'
- content_for(:title, title_and_header)

= link_to 'Back', @back_button_url, class: 'govuk-back-link'

%main.govuk-main-wrapper#main-content{role: 'main'}
  .govuk-grid-row
    .govuk-grid-column-two-thirds
      - if alert
        = render 'common/error_summary',
                 error_msg_div: '#caz-selection-error',
                 error_msg: alert

      = form_tag debits_path, method: :post do
        .govuk-form-group{class: ('govuk-form-group--error' if alert)}
          %fieldset.govuk-fieldset{'aria-describedby': 'caz-hint'}
            %legend.govuk-fieldset__legend.govuk-fieldset__legend--l
              %h1.govuk-fieldset__heading
                = title_and_header
            - if alert
              %span#caz-selection-error.govuk-error-message
                %span.govuk-visually-hidden Error:
                = alert
            %p#caz-hint
              You need to have a separate Direct Debit with each Clean Air zone that you wish to pay for.
            - if @zones.size == 1
              %details.govuk-details{'data-module': 'govuk-details'}
                %summary.govuk-details__summary
                  %span.govuk-details__summary-text
                    Why can I only select one Clean Air Zone?
                .govuk-details__text
                  You can only create one Direct Debit mandate per Clean Air Zone.
                  If you can only see one option then you have already created mandates for the other Clean Air Zones.
            .govuk-form-group
              .govuk-radios
                - @zones.each do |mandate|
                  .govuk-radios__item
                    %input.govuk-radios__input{name: 'local-authority',
                                               type: 'radio',
                                               value: mandate.zone_id,
                                               id: mandate.zone_name.downcase}
                    %label.govuk-label.govuk-radios__label{for: mandate.zone_name.downcase}
                      = mandate.zone_name

        = submit_tag 'Continue', class: 'govuk-button', 'data-module': 'govuk-button'
