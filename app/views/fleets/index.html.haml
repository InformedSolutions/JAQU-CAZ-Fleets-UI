= link_to 'Back to dashboard', dashboard_path, class: 'govuk-back-link'

%main.govuk-main-wrapper#main-content{role: 'main'}
  .govuk-grid-row
    .govuk-grid-column-full
      - if alert
        = render 'common/error_summary',
          error_msg_div: '#confirm-vehicle-creation-error',
          error_msg: alert

      %h1.govuk-heading-l Manage your vehicles
      %p
        Use this page to add and remove vehicles from your account.
        %br
        You can then pay for these vehicles on the
        = link_to('Make a payment', payments_path)
        page.

      %table.govuk-table
        %caption.govuk-table__caption
        %thead.govuk-table__head
          %tr.govuk-table__row
            %th.govuk-table__header{scope: 'col'} Registration Number
            %th.govuk-table__header{scope: 'col'} Type
            %th.govuk-table__header{scope: 'col'} Birmingham
            %th.govuk-table__header{scope: 'col', colspan: 2} Leeds
        %tbody.govuk-table__body
          - @fleet.vehicles.each do |vehicle|
            %tr.govuk-table__row
              %td.govuk-table__cell{scope: 'row'}
                = vehicle.vrn
              %td.govuk-table__cell{scope: 'row'}
                = vehicle.type
              %td.govuk-table__cell{scope: 'row'}
                = vehicle.formatted_charge('Birmingham')
              %td.govuk-table__cell{scope: 'row'}
                = vehicle.formatted_charge('Leeds')
              %td.govuk-table__cell{scope: 'row'}
                = link_to('Remove', assign_delete_fleets_path(vrn: vehicle.vrn))
      %p
        A vehicle labelled with 'No charge' under a Clean Air Zone means that it will not be charged
        when driving within that Clean Air Zone.

      = form_for fleets_path, method: :post do
        .govuk-form-group{class: ('govuk-form-group--error' if alert)}
          %fieldset.govuk-fieldset
            %legend.govuk-fieldset__legend.govuk-fieldset__legend--s{for: 'confirm-vehicle-creation'}
              Do you need to add another vehicle?

            - if alert
              %span#confirm-vehicle-creation-error.govuk-error-message
                %span.govuk-visually-hidden Error:
                = I18n.t('confirmation_form.answer_missing')

            .govuk-radios.govuk-radios--inline
              .govuk-radios__item
                %input#confirm-vehicle-creation-1.govuk-radios__input{name: 'confirm-vehicle-creation',
                                                                      type: 'radio',
                                                                      value: 'yes'}
                %label.govuk-label.govuk-radios__label{for: 'confirm-vehicle-creation-1'}
                  Yes

              .govuk-radios__item
                %input#confirm-vehicle-creation-2.govuk-radios__input{name: 'confirm-vehicle-creation',
                                                                      type: 'radio',
                                                                      value: 'no'}
                %label.govuk-label.govuk-radios__label{for: 'confirm-vehicle-creation-2'}
                  No

        = submit_tag 'Continue', class: 'govuk-button', 'data-module': 'govuk-button'

      %p
        If you need to add more vehicles you can override this list by uploading a new list.
      %p
        = link_to('Upload a new list of vehicles', reupload_fleets_path, id: 'reupload', class: 'govuk-link')

